{% extends 'base.jinja2' %}

{% block metaOG2 %}

    <meta name="description" property="og:title" content="Area de integração da EJ com outras ferramentas.">
    <meta property="og:description" content="Area de integração da EJ com outras ferramentas.">

{% endblock metaOG2 %}

{% block _menu %} {{ menu(request.user, board_palette) }} {% endblock %}

{% block content %}
<div>
	<div  class="integration-section">
		<div class="scrow" onclick="showContent()">
			<div>Generate a template for segmented marketing campaigns</div>
			<div><i class="fas fa-angle-down"></i></div>
		</div>
	<div class="integration-content">
		<p>With this feature, you can download an html version of this conversation.
			You can use it as a template on marketing automation tools like mautic and mailchimp.
			The template will heritage the palette from conversation's board. If there is no board,
			the default palette will be applied.
		</p>

		<span>Select a marketing tool to generate a compatible template</span>
		<form action="{{conversation.url("conversation:tools")}}" method="post">
			<select id="" name="">
				<option value="mautic">Mautic</option>
			</select>
			<div style="padding-left: 10px; display: flex">
				<input onchange="showDomainInput()" style="margin: 0; z-index: unset" type="checkbox">
				<label for="default_domain"> Redirect user to a custom domain</label>
			</div>
			<input name="custom-domain" style="margin-left: 10px; margin-bottom:15px; margin-top: unset; display: none" id="domain-input" type="text" placeholder="domain to redirect the user on template">
			<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
			<input type="submit" value="Download">
		</form>
	</div>
	</div>
</div>
   <script>
	   function showContent() {
		   let content = document.querySelector(".integration-content");
		   let section = document.querySelector(".integration-section");
		   if (window.getComputedStyle(content).maxHeight == "0px") {
			content.style.maxHeight = "400px";
			section.style.borderRadius = "unset";
			section.style.borderStyle = "unset";
		   }
		   else {
			content.style.maxHeight = "0px";
			section.style.borderStyle = "solid";
			section.style.borderRadius = "1rem";
		   }
	   }

	   function showDomainInput() {
		   let input = document.querySelector("#domain-input");
		   if (input.style.display == "none") {
			   input.style.display = "block";
		   } else {
			input.style.display = "none";
		   }
	   }
   </script>
{% endblock %}
