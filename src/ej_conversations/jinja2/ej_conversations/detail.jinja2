{% extends 'ej_conversations/base.jinja2' %}
{% set main_class = 'container-1 pad-x0' %}
{% set page_title = _('Conversation: "{}"').format(conversation.text) %}


{% block metaOG %}
    <meta name="description" property="og:title" content="{{ conversation.title }}">
    <meta property="og:description" content="{{ conversation.text }}">
    <meta name="twitter:title" content="{{ conversation.title }}">
{% endblock %}


{% block content %}
    {{ conversation|role('balloon') }}
    {% if conversation.is_hidden %}
        <div class="color-negative margin-3 pad-x3 pad-y2 rounded-3 center">
            <h2>{{ _('Warning!') }}</h2>
            <p>{% trans %}This conversation is hidden.{% endtrans %}
                {% trans here=edit_link() %} Click {{ here }} to edit and make it visible again.{% endtrans %}</p>
        </div>

    {% else %}
        {# <h1 class="h2 text-accent margin-y0 center">{{ _('Comments') }}</h1>#}
        <div class="comment-area pad-x2">
            <div class="col items-center margin-y3">
                {% if comment %}
                    {{ comment|role('card', target='.comment-area') }}
                    {{ conversation|role('user-progress', class='width-full', style="margin-top: 1.5rem;") }}
                {% else %}
                    <div class="comment-card center">
                        <article>
                            <h2 class="h3 text-accent">{{ _('Congratulations!') }}</h2>
                            <p>{{ _("There are no comments left to vote :)") }}</p>
                        </article>
                    </div>
                {% endif %}
                <h2 class="text-accent">{{ _('Suggest a new comment') }}</h2>
                {{ conversation|role('comment-form', form=comment_form, target='.comment-area') }}
                {{ conversation|role('create-comment') }}
            </div>
        </div>
    {% endif %}
    {{ conversation|role('detail-page-extra') }}
{% endblock %}


{% macro edit_link() %}
    <a href="{{ conversation.url('conversation:edit') }}" class="bold">{{ _('here') }}</a>
{% endmacro %}
