{% from 'ej_conversations/components/conversation-card.jinja2' import conversation_card %}
{% from 'components/generic/elements.jinja2' import link %}
{% from 'components/generic/react.jinja2' import react_component %}

{#---------------------------------------------------------------------------#
    CONVERSATION LIST
 #---------------------------------------------------------------------------#}

{% macro conversation_list(conversations,
                           categories,
                           title='Conversas públicas',
                           subtitle='Participe das conversas e dê sua opinião com comentários e votos!',
                           javascript_enabled='') %}

    {% if caller %}{% set caller_output = caller() %}{% endif %}

    <div class="ConversationList">
        {{ react_component('conversation_list', conversation_list_static(conversations, categories, title, subtitle, caller_output), javascript_enabled) }}
    </div>

{% endmacro %}

{% macro conversation_list_static(conversations, categories, title, subtitle, caller_output=None) %}
    <div class="ConversationListStatic">
        <div class="ConversationList-title">
            {% if caller_output %}{{ caller_output }}{% endif %}
            <h1 class="h1">{{ title }}</h1>
            <p>{{ subtitle }}</p>
        </div>

        {% if categories %}
            <div class="ConversationList-categories">
                <i class="fa fa-chevron-left"></i>
                <ul>
                    <li>{{ link(_('All'), href='/conversations/', class='color-accent') }}</li>
                    {% for category in categories %}
                        <li>{{ link(category, href=category.get_absolute_url()) }}</li>
                    {% endfor %}
                </ul>
                <i class="fa fa-chevron-right"></i>
            </div>
        {% endif %}

        {# Cards #}
        <div class="ConversationList-cardList">
            {% for conversation in conversations %}
                {{ conversation_card(conversation) }}
            {% endfor %}
        </div>
        {# {{ conversation_pagination() }} #}
    </div>
{% endmacro %}



{% macro conversation_pagination() %}
    <div class="ConversationPagination">
        <div class="ConversationPagination-pager">
            <a href="prev">&lt;</a> ... <a href="prev">&gt;</a>
        </div>
    </div>
{% endmacro %}
