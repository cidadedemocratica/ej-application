{% extends 'ej_conversations/base.jinja2' %}
{% set main_class = 'pad-x0' %}
{% set page_title = _('Conversation: "{}"').format(conversation.text) %}
{% set aria_flowto = 'comment-card' %}
{% set body_class = 'body theme-' + conversation.board.palette %}

{% if request.user.is_anonymous %}
    {% set hide_menu = true %}
{% else %}
    {% block menu %}
        {% if conversation.author.id == request.user.id or request.user.is_staff or request.user.is_superuser %}
            {% include 'ej_conversations/includes/menu-detail.jinja2' %}
        {% else %}
            {% include 'ej_conversations/includes/participant-menu.jinja2' %}
        {% endif %}
    {% endblock %}
{% endif %}

{% block metaOG %}
    <meta name="description" property="og:title" content="{{ conversation.title }}">
    <meta property="og:description" content="{{ conversation.text }}">
    <meta name="twitter:title" content="{{ conversation.title }}">
{% endblock %}

{% block main %}
    <{{ main_tag }} id="main-content" tabindex=0 class="{{ '' if request.user.is_anonymous else "main-container"  }}">
    {% block content %}
            {% if conversation.is_hidden %}
            <div class="content-grid content-grid--padding">
                <div class="color-negative margin-3 pad-x3 pad-y2 rounded-3 center">
                    <h2>{{ _('Warning!') }}</h2>
                    <p>{% trans %}This conversation is hidden.{% endtrans %}
                </div>
            </div>
            {% else %}
                {% include 'ej_conversations/includes/conversation-detail-header.jinja2' %}
                <div class="content-grid">
                    {% include 'ej_conversations/comments/card.jinja2' %}
                </div>
            {% endif %}
    {% endblock %}
{% endblock main %}
