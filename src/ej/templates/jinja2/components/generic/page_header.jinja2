{% from 'components/generic/elements.jinja2' import link %}
{% set up_transition = up_transition|default('cross-fade') %}


{# Generate the header element #}
{% macro page_header(request) %}
    <header class="Header">
        <div class="Header-wrapper">
            {{ header_top_nav(request) }}
            {{ header_lower_nav() }}
        </div>
    </header>
{% endmacro %}

{% macro header_top_nav(request) %}
    {% block javascript %}
        <script type="text/javascript">
        // this function controls the open/close button of "conversations dropdown on page_menu
        function openDropDown(){
            let element = document.getElementsByClassName("NavMenu-UserMenu");
            if(element[0].style.display == "inline")
                element[0].style.display = "none";
            else
                element[0].style.display = "inline";
        }
        </script>
    {% endblock %}
    <nav class="Header-topNav">
        {% if request.path != '/start/' %}
            <a title="{{ _('Back') }}" class="Header-topIcon" onclick="history.back()">
                <i class="fa fa-chevron-left"></i>
            </a>

            {% call link(href='/', class="Header-ejLogo") %}
                <img src="/static/img/logo/logo.svg" alt="EJ logo">
            {% endcall %}
    
            <a href="/menu/" title="{{ _("Navigation menu") }}" up-drawer=".NavMenu" up-history="false"
                class="Header-topIcon">
                <i class="fa fa-bars"></i>
            </a>

        {% else %}

            <a href="/menu/" title="{{ _("Navigation menu") }}" up-drawer=".NavMenu" up-history="false"
                class="Header-topIcon">
                <i class="fa fa-bars"></i>
            </a>

            {% call link(href='/', class="Header-ejLogo") %}
                <img src="/static/img/logo/logo.svg" alt="EJ logo">
            {% endcall %}

        {%endif%}

    </nav>
{% endmacro %}

{% macro header_lower_nav() %}
    <nav class="Header-lowerNav">
        {% call link('/missions/', title=_('Missions'), preload=True) %}
            <span>{{ _('Missions') }}</span>
        {% endcall %}

        {% call link('/conversations/', title=_('Conversations'), preload=True) %}
            <img src="/static/img/icons/conversations.svg" alt="{{ _('Conversations') }}" class="Header-lowerIcon">
            <span>{{ _('Conversations') }}</span>
        {% endcall %}

        {# {% call link('/notifications/', title=_('Notifications'), preload=True) %}
            <img src="/static/img/icons/talks.svg" title="{{ _('Talks') }}" class="Header-lowerIcon">
            <span>{{ _('Talks') }}</span>
        {% endcall %} #}

        {% call link('/profile/', title=_('Profile'), preload=True) %}
            <img src="/static/img/icons/profile.svg" title="{{ _('Profile') }}" class="Header-lowerIcon">
            <span>{{ _('Profile') }}</span>
        {% endcall %}
    </nav>
{% endmacro %}


