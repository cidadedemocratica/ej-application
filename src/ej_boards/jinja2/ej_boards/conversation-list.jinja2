{% extends 'base.jinja2' %}

{% block metaOG2 %}
    <meta name="description" property="og:title" content="{{ board.title }}">
    <meta property="og:description" content="{{ board.description }}">
    <meta name="twitter:title" content="{{ board.title }}">
{% endblock metaOG2 %}

{% set main_class = "form-container" %}
{% set body_class = 'body theme-' + board.palette %}

{% block menu %}{% include 'ej_boards/includes/menu-board.jinja2' %}{% endblock %}

{% block content %}
<div class="board-statistics-container">
    <div id="edit-board">
        <h1 class="h2 text-accent">{{ board.title}}</h1>

        {%- if request.user.has_perm('ej.can_edit_board', board) %}
            <a href="{{ url('boards:board-edit', board=board) }}"><i class="fas fa-pen"></i></a>
        {% endif %}

    </div>
    {%- if board.conversations.count() == 0 %}
        <div class="helptext board-helptext">{{ help_title }}</div>
    {% endif %}
    <div class="cards-divider">
        {% with value=board.statistics()["votes"], title=_('Total votes') %}
            {% include 'ej_boards/includes/stats-card.jinja2' %}
        {% endwith %}
        {% with value=board.statistics()["participants"], title=_('Total participants') %}
            {% include 'ej_boards/includes/stats-card.jinja2' %}
        {% endwith %}
        {% with value=board.statistics()["conversations"], title=_('Total conversations') %}
            {% include 'ej_boards/includes/stats-card.jinja2' %}
        {% endwith %}
    </div>
    <div class="signature-text">{{_('Signature model')}}: <a
         class="signature-link">{{board.owner.get_signature_display()}}</a></div>

    {%- if request.user.has_perm('ej.can_edit_board', board) and request.user.has_perm('ej.can_add_conversation') %}
        <a class="is-primary button square" href="{{ url('boards:conversation-create', board=board) }}">{{ _('New conversation') }}</a>
    {% endif %}

</div>

<hr>
{% if not (request.user.is_staff or request.user.is_superuser) %} 
    <span class="helptext">{% trans %}In the current signature, you can create {{conversations_limit}} conversations.{% endtrans %}{{ ' ' }}</span>
{% endif %}

    <div class="alternate-cards"> 
        {% for conversation in conversations %}
            <div class="margin-y3">{{ conversation|role('card',url=conversation.url('report:general-report')) }}</div>
        {% endfor %}
    </div>
{% endblock %}
