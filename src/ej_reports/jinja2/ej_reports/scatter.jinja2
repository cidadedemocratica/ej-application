{% extends 'base.jinja2' %}
{% block content %}
    <div class="Container">
        <div id="container" style="width 100%; min-height: 400px"></div>
        <div class="dropdown">
            <button class="dropbtn"><a href="..">Go back</a></button>
        </div>
    </div>
{% endblock %}


{% block javascript_body %}
    {{ super() }}
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
    <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
var plot_data = {{ plot_data }};
var gender_list = {{ js_gender }};
console.log(gender_list)
var full_series = [];
for (gender in gender_list) {
    full_series.push({
        name: gender,
        data: plot_data[gender],
        type: 'scatter',
        symbolSize: function (data) {
            return 10;
        },
        label: {
            emphasis: {
                show: true,
                formatter: function (param) {
                    return gender;
                },
                position: 'top'
            }
        }
    })
}
option = null;
option = {
    title: {
        text: 'Scatterplot'
    },
    legend: {
        data: gender_list
    },
    xAxis: {},
    yAxis: {},
    series: full_series
};
if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
$(window).on('resize', function(){
    if(myChart !== null && myChart !== undefined){
        myChart.resize();
    }
});
    </script>
{% endblock %}
